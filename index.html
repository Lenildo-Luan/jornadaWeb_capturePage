<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lenildo Luan</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@100;700&display=swap" rel="stylesheet">
</head>
<body>
    <head></head>

    <div class="container">
        <img src="./assets/mainImg.png" alt="Lenildo Luan" class="mainImg">  
        <main>
            <h1 class="title">
                Aula ao vivo <br class="verySmallScreenBreaker">
                de dev web
            </h1>
            <p class="text">
                Vamos fazer, toda quinta, às 20h, um projeto juntos e aprender mais <br class="verySmallScreenBreaker">
                sobre os fundamentos do desenvolvimento web, online e de graça?
            </p>

            <form id="mainForm" action="">
                <input id="formName" type="text" placeholder="Seu nome"> <br class="smallScreenBreaker">
                <input id="formEmail" type="email" placeholder="Seu email"> <br>
                <input type="submit" value="QUERO PARTICIPAR"> <br>

                <label class="checkboxContainer text">
                    Ao participar concordo em receber comunicações
                    <input id="checkbox" type="checkbox">
                    <span id="checkboxSpan" class="checkmark"></span>
                </label>
            </form>
        </main>
    </div>

    <script>
        const mainForm =  document.getElementById('mainForm');

        mainForm.addEventListener('submit', function(element){
            const nameRegex = /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/g;
            const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
            const requestUrl = 'https://ml-page-api.herokuapp.com/api/v1/lenildo/users';
            const mainForm = {
                nameInput: document.getElementById('formName'),
                emailInput: document.getElementById('formEmail'),
                checkbox: document.getElementById('checkbox'),
                checkboxSpan: document.getElementById('checkboxSpan'),
            }   
            const requestBody = {
                name: mainForm.nameInput.value,
                email: mainForm.emailInput.value,
            }

            element.preventDefault();

            if(requestBody.name == null || !nameRegex.test(requestBody.name)) {
                alert(requestBody.name);
                mainForm.nameInput.style.borderColor = '#D50000';
            } else if(requestBody.email == null || !emailRegex.test(requestBody.email)) {
                alert('EMAIL DEU RUIM');
                mainForm.nameInput.style.borderColor = '#262626';
                mainForm.emailInput.style.borderColor = '#D50000';
            } else if(!mainForm.checkbox.checked) {
                mainForm.emailInput.style.borderColor = '#262626';
                mainForm.checkboxSpan.style.borderColor = '#D50000';
                // alert('NUM TA CHECKADO PAI');
            } else {
                alert('DEU BOM');
                mainForm.checkboxSpan.style.borderColor = '#262626';
                // fetch(requestUrl, {
                //     method: 'post',                                              
                //     body: 'requestBody',
                // }).then(response => {
                //     console.log(response);
                // }).catch(err => {
                //     console.log(err);
                // })
            }
        })
    </script>
</body>
</html>